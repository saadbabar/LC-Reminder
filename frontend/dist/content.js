(()=>{console.log("IIFE in content script executing"),console.log("content.js script is injected");let n="";async function t(){const t=document.querySelector('button[data-e2e-locator="console-submit-button"]');let o=0;const e=new MutationObserver((async(t,e)=>{if(o+=1,2===o){await new Promise((n=>setTimeout(n,500)));const t=document.querySelector('span[data-e2e-locator="submission-result"]'),r=t&&"Accepted"===t.textContent;if(e.disconnect(),o=0,!r)return void console.log("Submission not accepted. No further action.");console.log("Submission accepted."),async function(){const t=function(){const n=document.createElement("div");return n.style.cssText="\n            position: fixed;\n            z-index: 10000;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n            overflow: auto;\n            background-color: rgba(0,0,0,0.4);\n            font-family: Arial, sans-serif;\n        ",n.innerHTML='\n            <div style="\n                background-color: #2d3748;\n                margin: 15% auto;\n                padding: 20px;\n                border-radius: 8px;\n                width: 300px;\n                max-width: 80%;\n            ">\n                <h2 style="\n                    margin: 0 0 20px 0;\n                    font-size: 1.25rem;\n                    color: #fff;\n                ">Rate the question difficulty</h2>\n                <div style="\n                    display: flex;\n                    justify-content: center;\n                    margin-bottom: 15px;\n                ">\n                    <button class="star-btn" data-rating="1" style="\n                        background: none;\n                        border: none;\n                        cursor: pointer;\n                        font-size: 24px;\n                        color: #718096;\n                        transition: color 0.2s;\n                    ">★</button>\n                    <button class="star-btn" data-rating="2" style="\n                        background: none;\n                        border: none;\n                        cursor: pointer;\n                        font-size: 24px;\n                        color: #718096;\n                        transition: color 0.2s;\n                    ">★</button>\n                    <button class="star-btn" data-rating="3" style="\n                        background: none;\n                        border: none;\n                        cursor: pointer;\n                        font-size: 24px;\n                        color: #718096;\n                        transition: color 0.2s;\n                    ">★</button>\n                    <button class="star-btn" data-rating="4" style="\n                        background: none;\n                        border: none;\n                        cursor: pointer;\n                        font-size: 24px;\n                        color: #718096;\n                        transition: color 0.2s;\n                    ">★</button>\n                    <button class="star-btn" data-rating="5" style="\n                        background: none;\n                        border: none;\n                        cursor: pointer;\n                        font-size: 24px;\n                        color: #718096;\n                        transition: color 0.2s;\n                    ">★</button>\n                </div>\n                <p style="\n                    text-align: center;\n                    color: #a0aec0;\n                    font-size: 0.875rem;\n                    margin-bottom: 15px;\n                ">1 (Easiest) to 5 (Hardest)</p>\n                <button class="submit-button" style="\n                    display: block;\n                    width: 100%;\n                    padding: 10px;\n                    background-color: #4a5568;\n                    color: white;\n                    border: none;\n                    border-radius: 4px;\n                    font-size: 1rem;\n                    cursor: pointer;\n                    transition: background-color 0.2s;\n                " disabled>Submit</button>\n            </div>\n        ',n}();document.body.appendChild(t);const o=await new Promise((n=>{const o=t.querySelector(".submit-button"),e=t.querySelectorAll(".star-btn");let r=0;e.forEach((n=>{n.addEventListener("click",(()=>{r=parseInt(n.getAttribute("data-rating")),function(n,t){n.forEach(((n,o)=>{n.style.color=o<t?"#f6e05e":"#718096"}))}(e,r),o.disabled=!1,o.style.backgroundColor="#2d3748",o.style.cursor="pointer"}))})),o.addEventListener("click",(()=>{r>0&&(document.body.removeChild(t),n(r))}))}));console.log("Difficulty rating entered:",o);let e=document.querySelector('div[class*="truncate text-text-primary"]'),r=e?e.textContent:"";if(!r){if(r=(await chrome.storage.local.get(["username"])).username||window.prompt("Enter your LeetCode username:"),!r)return void console.log("Username not provided.");await chrome.storage.local.set({username:r})}console.log("Username is:",r),async function(n,t,o){try{const e=await fetch("http://127.0.0.1:8000/add_problem/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,problem_name:t,difficulty:o,accepted:!0}),credentials:"include"}),r=await e.text();console.log("Response from backend:",r)}catch(n){console.error("Error sending data to backend:",n)}}(r,n,o)}()}}));e.observe(t,{attributes:!0,subtree:!0})}!function(){const o=window.location.href.match(/\/problems\/([^\/]+)\//);o&&o[1]?(n=o[1],console.log("Current problem:",n),function(){function n(){const n=document.querySelector('button[data-e2e-locator="console-submit-button"]');return n?(n.removeEventListener("click",t),n.addEventListener("click",t),console.log("Submit button listener attached."),!0):(console.log("Submit button not found. Waiting for it to become available."),!1)}n()||new MutationObserver(((t,o)=>{n()&&o.disconnect()})).observe(document.body,{childList:!0,subtree:!0})}()):console.log("Not on a problem page.")}()})();